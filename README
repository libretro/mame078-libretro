Proof of concept
Based on MAME 0.78

Tested for OS X, linux, Wii, and Android (arm-v7a).

Generates directories as it requires:
* User-generated content: Saves (NVRAM, MEMCARD), Hi-Scores, and Controller Config files are in sub-directories within the Retroarch Savefile Dir.
* Everything else (Cheats, Mame INI, etc) in the Retroarch System/BIOS Dir.

TODO:

* Make sure all of the mkdir commands in makefile complete before any compiling starts.
* Input Descriptors (for use in Core Input Remapping)
* Lots more

Notes:

* Will have errors on 64-bit platforms.
* Will have errors on platforms without unaligned memory access support.
* When using concurrent building you may get an error that it can't create certain object files, just rerun make if it happens.
* To run on Wii's memory constraints some drivers in src/driver.c must be removed.

LINKS TO CONSULT:

http://www.anthrofox.org/code/mame/index.html
https://code.oregonstate.edu/svn/dsp_bd/uclinux-dist/trunk/user/games/xmame/xmame-0.106/src/unix/contrib/patches/word-align-patch
http://www.filewatcher.com/b/ftp/ftp.zenez.com/pub/mame/xmame.0.0.html